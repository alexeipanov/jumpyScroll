!function(e){"use strict";function t(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return e.jumpyScroll=function(n){var o,a,l,c,i=jumpyScroll.settings=jumpyScroll.init(n),r=e.pageYOffset||document.documentElement.scrollTop,d=!1,s=300,u=null,m=!0,p="hash",v=document.querySelectorAll(i.pageElement),f=["webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend","animationend"],h="wheel";if(0===v.length)return void console.log('pageElement selector "'+i.pageElement+'" not found in document, aborting!');var y=function(e){v[x].addEventListener(e,function(e){this.classList.remove(i.animation),d=!1})},g=function(e){o=e.changedTouches[e.changedTouches.length-1]},L=function(e){if(e.changedTouches.length>0){var t=o.clientY-e.changedTouches[e.changedTouches.length-1].clientY;Math.abs(t)>i.touchLimit&&e.preventDefault()}},E=function(e){if(e.changedTouches.length>0){var t=o.clientY-e.changedTouches[e.changedTouches.length-1].clientY;Math.abs(t)>i.touchLimit&&(p=e.type,jumpyScroll.toNearby(t>i.touchLimit,t<-i.touchLimit))}},S=function(e){e.stopPropagation(),e.ctrlKey===!1&&e.preventDefault(),clearTimeout(u),u=setTimeout(function(){e.ctrlKey===!1&&(p=e.type,jumpyScroll.toNearby(e.deltaY>0,e.deltaY<0))},s)};v[0].classList.add("active");for(var x=0;x<v.length;x++)v[x].classList.add("animated"),v[x].style.height="100vh",v[x].style.overflow="hidden",v[x].style.WebkitAnimationDuration=i.speed/1e3+"s",v[x].style.animationDuration=i.speed/1e3+"s",f.forEach(y),v[x].addEventListener(h,S),i.touch&&(v[x].addEventListener("touchstart",g),v[x].addEventListener("touchmove",L),v[x].addEventListener("touchend",E));if(a=document.createElement("div"),a.classList.add("jumpyscroll"),a.classList.add("nav"),v[0].parentElement.appendChild(a),i.info){var b=document.querySelectorAll(i.pageElement).length,T=1;l=document.createElement("div"),l.classList.add("jumpyscroll"),l.classList.add("info"),l.setAttribute("tabindex","-1"),l.innerHTML="<span>"+i.infoText.replace(/\${pageNo}/,T).replace(/\${pageCount}/,b)+"</span>",document.querySelector(i.pageElement).parentNode.appendChild(l)}if(i.keys&&(document.addEventListener("keydown",function(e){e.ctrlKey||"body"===e.target.nodeName.toLowerCase()&&e.preventDefault()}),document.addEventListener("keyup",function(e){e.preventDefault(),"body"===e.target.nodeName.toLowerCase()&&[32,33,34,38,40].indexOf(e.keyCode)>=0&&(p=e.type,jumpyScroll.toNearby([32,34,40].indexOf(e.keyCode)>=0,[33,38].indexOf(e.keyCode)>=0))})),i.nav){var j=document.createElement("div");j.className="prev",j.innerHTML=i.prevLabel,a.appendChild(j);var A=document.createElement("div");A.className="next",A.innerHTML=i.nextLabel,a.appendChild(A);var C=function(e){e.preventDefault(),p=e.type,jumpyScroll.toNearby(this.classList.contains("next"),this.classList.contains("prev"))};A.addEventListener("click",C),j.addEventListener("click",C),A.addEventListener("touchstart",C),j.addEventListener("touchstart",C)}if(i.dots){var N=document.createElement("div");N.classList.add("dots"),a.appendChild(N);var k,w=function(e){e.preventDefault(),p=e.type;var t=Array.prototype.indexOf.call(document.querySelectorAll(".dot"),this);jumpyScroll.toIndex(t)};for(x=0;x<v.length;x++)k=document.createElement("div"),k.classList.add("dot"),k.innerHTML=i.dotLabel,k.addEventListener("click",w),N.appendChild(k);for(var I=document.querySelectorAll(".dot.active"),q=0;q<I.length;q++)I[q].classList.remove("active");var O=document.querySelectorAll(".dot");O[i.currentIndex].classList.add("active")}c=e.location.hash,e.addEventListener("hashchange",function(e){e.preventDefault(),p=e.type;var t=document.querySelectorAll(i.pageElement+c);t.length>0&&jumpyScroll.toIndex(Array.prototype.indexOf.call(v,t[0]))}),document.addEventListener("onBeforeScroll",function(e){var t=e.detail.index;i.onBeforeScroll.call(this,t)}),document.addEventListener("onAfterScroll",function(e){var t=e.detail.index;if(i.onAfterScroll.call(this,t),i.info){var n=document.querySelectorAll(i.pageElement).length;document.querySelector(".jumpyscroll.info span").innerHTML=i.infoText.replace(/\${pageNo}/,++t).replace(/\${pageCount}/,n)}}),e.addEventListener("resize",function(e){e.preventDefault(),clearTimeout(u),u=setTimeout(function(){d=!1,p=e.type,jumpyScroll.toIndex(i.currentIndex)},s)}),e.addEventListener("scroll",function(n){var o;n.detail&&(o=n.detail.index);var a,l;if(l=s,d||void 0===o||m&&(l=10,m=!1),d||void 0===o||(clearTimeout(u),u=setTimeout(function(){if(a=v[o],o!==i.currentIndex){var n=new t("onBeforeScroll",{detail:{index:o}});if(document.dispatchEvent(n),d=!0,i.dots){var l=document.querySelectorAll(".dot");l[i.currentIndex].classList.remove("active"),l[o].classList.add("active")}}if(v[i.currentIndex].classList.remove("active"),a.scrollIntoView(!0),r=e.pageYOffset||document.body.scrollTop,a.classList.add("active"),o!==i.currentIndex){a.classList.add(i.animation);var c=new t("onAfterScroll",{detail:{index:o}});document.dispatchEvent(c)}i.currentIndex=o},l)),!d&&void 0===o&&"hash"!==p&&"resize"!==p){var c=e.pageYOffset||document.documentElement.scrollTop;jumpyScroll.toNearby(c>r,r>c)}if(!d&&"hash"===p&&e.location.hash){var f=document.querySelectorAll(i.pageElement+e.location.hash);f.length>0&&jumpyScroll.toIndex(Array.prototype.indexOf.call(v,f[0]))}})},e.jumpyScroll.init=function(e){function t(e,t){var n={};for(var o in e)t.hasOwnProperty(o)?n[o]=t[o]:n[o]=e[o];return n}var n={pageElement:"section",touch:!0,touchLimit:5,keys:!0,animation:"ease",speed:500,nav:!0,nextLabel:"",prevLabel:"",dots:!0,dotLabel:"",info:!0,currentIndex:0,infoText:"Page ${pageNo} from ${pageCount}",onBeforeScroll:function(e){},onAfterScroll:function(e){}};return e&&Object.keys(e).forEach(function(t){typeof e[t]!=typeof n[t]&&(e[t]=n[t],console.log("jumpyScroll: key "+t+" must be a "+typeof n[t]+"!"))}),t(n,e)},e.jumpyScroll.toNearby=function(n,o){var a=this.settings.currentIndex,l=document.querySelectorAll(this.settings.pageElement);switch(!0){case n:a++,a=Math.min(a,l.length-1);break;case o:a--,a=Math.max(a,0)}var c=new t("scroll",{detail:{index:a}});e.dispatchEvent(c)},e.jumpyScroll.toIndex=function(n){var o=new t("scroll",{detail:{index:n}});e.dispatchEvent(o)},e.jumpyScroll.next=function(){this.toNearby(!0,!1)},e.jumpyScroll.prev=function(){this.toNearby(!1,!0)},"function"==typeof e.CustomEvent?!1:(t.prototype=e.Event.prototype,void(e.CustomEvent=t))}(window);